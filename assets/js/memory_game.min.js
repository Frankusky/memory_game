"use strict";!function(){for(var a=0;a<8;a++)(new Image).src="assets/img/"+(a+1)+".gif";var e=[[],[],[],[]],t={},r=function(a){var t=new RegExp(a,"g"),r=e.toString().match(t);return null===r||r.length<2},d=function(){for(var a=0;a<4;a++)for(var t=0;t<4;t++)for(var d=!0;d;){var n=Math.floor(8*Math.random())+1;r(n)&&(e[a].push(n),d=!1)}};d();var n=0,i=!1,s=!0,o=0,c=0,l=0,u=function(){l++,$("#movesAmount").text(l),11!==l&&15!==l||$("#starsAmount").fadeOut(function(){this.innerHTML=this.innerHTML.slice(0,-1)}).fadeIn()},m=function(){s=!1,o=setInterval(function(){c++,$("#timer").html(c+" sec")},1e3)};$(".card").click(function(){s&&m();var a=$(this),r=a.index(),d=a.parent().index(),o=e[d][r];if($(".pickedCard").length>1&&(clearTimeout(n),i||$(".pickedCard").css("background-image",""),$(".pickedCard").removeClass("pickedCard"),t={}),!a.hasClass("pickedCard")&&-1!==a.css("background-image").indexOf("cardBack"))if(a.css("background-image","url(assets/img/"+o+".gif)"),a.addClass("pickedCard"),t.value)if(u(),$(".hintCard").removeClass("hintCard"),t.value===o){if(i=!0,a.addClass("pairFounded"),t.dom.addClass("pairFounded"),$(".pickedCard").removeClass("pickedCard"),t={},16===$(".pairFounded").length){$("#modal, #winMessage").fadeIn();var h=$("#starsAmount").text();$("#stats").html("Total Time: "+c+" seconds<br>Total Moves: "+l+"<br>Stars: "+h)}}else i=!1,n=setTimeout(function(){$(".pickedCard").css("background-image",""),$(".pickedCard").removeClass("pickedCard"),t={}},1e3);else t.value=o,t.dom=a}),$("#hint").click(function(){var a=$("#hint");if(0!==$(".hintCard").length)return!1;var r=$(".pairFounded").length,d=Number(a.text().replace(/\D+/g,""));if(r>=12)alert("Too few cards, don´t give up, you almost got it!"),a.attr("disabled","enabled");else if(1===$(".pickedCard").length&&r<13&&0!==d){a.text("Hint ("+(d-1)+")"),0===d&&a.attr("disabled","enabled");for(var n=0;n<4;n++)for(var i=0;i<4;i++)e[n][i]===t.value&&$(".row:nth-child("+(n+1)+")>.card:nth-child("+(i+1)+")").addClass("hintCard");for(;$(".hintCard").length<4;){var s=$(".card").not(".pickedCard,.hintCard,.pairFounded"),o=Math.floor(Math.random()*s.length)+1;$(s[o]).addClass("hintCard")}}else alert("You must first select a card")}),$(".new_game").click(function(){$("#modal").fadeOut(),$("#startMessage").css("display","none"),$(".card").css("background-image","").removeClass("pickedCard hintCard pairFounded"),$("#starsAmount").html("★★★"),$("#movesAmount").html("0"),$("#timer").html(0),$("#hint").text("Hint (3)"),clearInterval(o),t={},e=[[],[],[],[]],s=!0,c=0,l=0,d()})}();